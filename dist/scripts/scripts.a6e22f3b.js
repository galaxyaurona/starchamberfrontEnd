"use strict";var CKEDITOR_BASEPATH="scripts/ckeditor/",backendRoute="";angular.module("starChamberUiApp",["ngRoute","SCNavBarDirective","ui.router","chart.js","textAngular","ckeditor","angular.panels","ui.grid","ui.grid.selection","ngBootbox","flow","ui.uploader","shagstrom.angular-split-pane","ui.bootstrap.accordion","ui.bootstrap","xeditable"]).config(["$routeProvider","$locationProvider","$httpProvider",function(a,b,c){a.when("/test",{templateUrl:"views/test.html",controller:"TestCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/concern",{templateUrl:"views/concern.html",controller:"ConcernCtrl",resolve:{concerns:["UserService",function(a){}]}}).when("/dashboard",{templateUrl:"views/dashboard.html",controller:"DashboardCtrl",resolve:{minutes:["minuteService","UserService",function(a,b){}],meetings:["meetingService","UserService",function(a,b){}],reports:["reportService","UserService",function(a,b){}]}}).when("/meeting",{templateUrl:"views/meetingmanager.html",controller:"MeetingCtrl",resolve:{meeting:["$route","meetingService",function(a,b){return console.log(a,b),b.getMeeting(a.current.params.id)}]}}).otherwise({redirectTo:"/login"})}]).run(["$rootScope","$location","$route","UserService","$http",function(a,b,c,d,e){a.checkSecurityClearance=function(){d.isLogin()?("/login"==b.path()&&(d.userData.importantRole?b.path("/dashboard"):b.path("/concern")),"/concern"==b.path()||d.userData.importantRole||b.path("/concern")):"/test"!=b.path()&&b.path("/login")},a.$on("$routeChangeStart",function(){a.checkSecurityClearance()}),a.prettifyJSON=function(a){return JSON.stringify(a,null,2)}}]).run(["editableOptions",function(a){a.theme="bs3"}]),angular.module("starChamberUiApp").controller("TestCtrl",["$scope","$rootScope","$filter","$http",function(a,b,c,d){a.backendRoute="http://www.ltuteamg.com:8000/api/users/auth",a.submit=function(b){switch(console.log(a.jsonData),angular.isDefined(a.jsonData)?angular.isString(a.jsonData)&&(a.jsonDataParsed=JSON.parse(a.jsonData)):a.jsonDataParsed={},a.method="",a.success=!1,b){case 1:a.method="POST";break;case 2:a.method="GET";break;case 3:a.method="PUT"}a.config="emtpy",a.header="empty",a.data="empty",a.status="empty";var c={method:a.method,url:a.backendRoute,headers:{"Content-type":"application/json"},data:a.jsonDataParsed};d(c).then(function(b){a.success=!0,a.response=JSON.stringify(b,null,4),a.config=JSON.stringify(b.config,null,4),a.data=JSON.stringify(b.data,null,4),a.status=JSON.stringify(b.status,null,4),a.header=JSON.stringify(b.headers,null,4)},function(b){a.success=!1,a.data="Error response from server"})}}]),angular.module("SCNavBarDirective",["starChamberUiApp"]).directive("scNavbar",["$location","UserService","$window",function(a,b,c){return{templateUrl:"views/partials/navbar.html",restrict:"E",replace:!0,link:function(c,d,e){c.UserService=b,c.notifications=[{link:"#/concern",content:"You have a new concern to be viewed",visited:!1},{link:"#/meeting/213",content:"You are invited to attend a meeting.",visited:!1}],c.visitedAll=function(){c.newNotification=!1,angular.forEach(c.notifications,function(a,b){a.visited=!0})},c.$watch("notifications",function(){c.newNotificationCount=0,angular.forEach(c.notifications,function(a,b){c.newNotification=c.newNotification||!a.visited,a.visited||c.newNotificationCount++})}),c.logout=function(){b.logout(),a.path("/login")},c.loadMore=function(){console.log("Calling to API load more",b)}}}}]),angular.module("starChamberUiApp").controller("LoginCtrl",["$scope","$rootScope","$location","$http","UserService",function(a,b,c,d,e){a.loginInfo={username:void 0,password:void 0},b.boardName="Login",a.doLogin=function(){a.loginInfo.username&&a.loginInfo.password&&(e.login(a.loginInfo)?(e.isLogin(),e.userData.importantRole?c.path("/dashboard"):c.path("/concern")):a.loginError="Username and password combination is incorrect")}}]),angular.module("starChamberUiApp").controller("ConcernCtrl",["$scope","$rootScope","$location","$filter","ConcernService","UserService","uiGridConstants",function(a,b,c,d,e,f,g){var h=[];a.concern={},a.concerns=e.getConcern(f.userData),angular.forEach(a.concerns,function(a,b){-1==h.map(function(a){return a.value}).indexOf(a.status)&&h.push({value:a.status,label:a.status})}),a.log=function(a){console.log(a)},a.removeConcern=function(b){e.deleteConcern(b);a.concerns.indexOf(b);a.gridOptions.data=a.concerns};var i=[{field:"subject",cellTemplate:'<div class="ui-grid-cell-contents"><a ng-click="grid.appScope.showConcernDetails(row.entity)">{{row.entity.subject}}</a></div>'},{field:"date",cellFilter:'date:"dd/MM/yyyy"',filterCellFiltered:!0,width:"15%"},{field:"status",filter:{type:g.filter.SELECT,selectOptions:h},width:"15%"},{field:"Delete",width:100,enableFiltering:!1,cellTemplate:'<div class="ui-grid-cell-contents"><a ng-click="grid.appScope.removeConcern(row.entity)">Remove</a></div>'}];a.gridOptions={enableSorting:!0,enableFiltering:!0,columnDefs:i,data:a.concerns},b.boardName="Concern",a.submitConcern=function(){a.concern.subject&&a.concern.description?e.postConcern(f.userData.id,a.concern)?(a.concern={},a.concernMessage="Concern successfully submitted",a.messageClass="alert-success",a.concerns=e.getConcern(f.userData)):a.concernMessage="Error submitting concern, please try again":(a.messageClass="alert-danger",a.concernMessage="Concern subject or description is empty, cannot submit this")},a.showConcernDetails=function(b){a.concernDetail=b,$("#concern-modal").modal("show")},$("#show-modal").click(function(a){$("#concern-modal").modal("show")}),$("#close-modal").click(function(){console.log("hi"),$("#concern-modal").modal("hide")})}]),angular.module("starChamberUiApp").factory("UserService",["$rootScope","$http","$q","AuthToken",function(a,b,c,d){var e={};return e.userData={},e.login=function(a){console.log(a);var c={method:"POST",url:"http://www.ltuteamg.com:8000/api/users/auth",headers:{"Content-type":"application/json"},data:a};return b(c).then(function(a){return console.log(a),d.setToken(a.token),a})},e.isLogin=function(){return d.getToken()?(e.userData=JSON.parse(d.getToken()),"user"==e.userData.role?e.userData.importantRole=!1:e.userData.importantRole=!0,!0):(e.userData={},!1)},e.logout=function(){d.setToken(),e.userData={}},e}]).factory("AuthToken",["$window",function(a){var b={};return b.getToken=function(){return a.localStorage.getItem("token")},b.setToken=function(b){b?a.localStorage.setItem("token",JSON.stringify(b)):a.localStorage.removeItem("token")},b}]),angular.module("starChamberUiApp").controller("DashboardCtrl",["$log","$scope","$rootScope","$location","$filter","UserService","meetingService","uiGridConstants","meetings","reports","minutes",function(a,b,c,d,e,f,g,h,i,j,k){"manager"==f.userData.role?b.manager=!0:b.manager=!1,c.boardName="Dashboard";var l=[];b.meetings=angular.copy(g.getMeetings(f.userData)),console.log(b.meetings),angular.forEach(b.meetings,function(a,b){if(-1==l.map(function(a){return a.value}).indexOf(a.state))switch(a.state){case 0:a.state="Polling";break;case 1:a.state="Pending";break;case 2:a.state="Scheduled-Agenda open";break;case 3:a.state="Scheduled-Agenda closed";break;default:a.state="meeting"}l.push({value:a.state,label:a.state})});var m=[{field:"title",cellTemplate:'<div class="ui-grid-cell-contents"><a ng-href="/#/meeting?id={{row.entity.id}}">{{row.entity.title}}</a></div>'},{field:"date",cellFilter:'date:"dd/MM/yyyy"',filterCellFiltered:!0,width:"15%"},{field:"state",filter:{type:h.filter.SELECT,selectOptions:l},width:"30%"},{field:"conditions",width:"30%",enableFiltering:!1,cellTemplate:'<div class="ui-grid-cell-contents"><span ng-repeat="(key, value) in row.entity.conditions" ng-if="value"><strong>{{key}}</strong> </span></div>'}];b.meetingGridOptions={enableSorting:!0,enableFiltering:!0,enableHorizontalScrollbar:0,enableVerticalScrollbar:0,columnDefs:m,data:b.meetings};var n=[{field:"title",cellTemplate:'<div class="ui-grid-cell-contents"><a ng-href="/#/minute/{{row.entity.id}}">{{row.entity.title}}</a></div>'},{field:"date",cellFilter:'date:"dd/MM/yyyy"',filterCellFiltered:!0,width:"30%"},{field:"export",width:"15%",enableFiltering:!1,cellTemplate:'<div class="ui-grid-cell-contents"><a>Export</a></div>'}];b.minutes=[{title:"Monthly meeting's minute",date:new Date("18 Feb 2015 17:30:00"),url:"/#/test/#"},{title:"Weekly meeting's minute",date:new Date("12 March 2015 03:30:00"),url:"/#/test/#"}],b.minuteGridOptions={enableSorting:!0,enableFiltering:!0,columnDefs:n,data:b.minutes};var o=[{field:"title",cellTemplate:'<div class="ui-grid-cell-contents"><a ng-href="/#/minute/{{row.entity.id}}">{{row.entity.title}}</a></div>'},{field:"date",cellFilter:'date:"dd/MM/yyyy"',filterCellFiltered:!0,width:"30%"},{field:"export",width:"15%",enableFiltering:!1,cellTemplate:'<div class="ui-grid-cell-contents"><a>Export</a></div>'}];b.reports=[{title:"Finance report",date:new Date("24 June 2015 17:30:00"),url:"/#/test/#"},{title:"Security report",date:new Date("29 February 2015 03:30:00"),url:"/#/test/#"}],b.reportGridOptions={enableSorting:!0,enableFiltering:!0,columnDefs:o,data:b.reports},$("#close-calendar").click(function(){$("#calendar-modal").modal("hide")}),$("#show-calendar").click(function(){$("#calendar-modal").modal("show")})}]),angular.module("starChamberUiApp").config(["$stateProvider",function(a){a.state("Polling",{views:{sub2:{templateUrl:"views/subviews/meetingPollOpen.html",controller:"VoteCtrl"},sub3:{templateUrl:"views/subviews/meetingAgendaOpen.html",controller:"AgendaCtrl"},sub1:{templateUrl:"views/subviews/meetingInvitesOpen.html",controller:"InviteCtrl"}}}).state("Pending",{views:{sub2:{templateUrl:"views/subviews/meetingPollClosed.html",controller:"VoteCtrl"},sub3:{templateUrl:"views/subviews/meetingAgendaOpen.html",controller:"AgendaCtrl"},sub1:{templateUrl:"views/subviews/meetingInvitesOpen.html",controller:"InviteCtrl"}}}).state("Scheduled",{views:{sub2:{templateUrl:"views/subviews/meetingAttendance.html",controller:"VoteCtrl"},sub3:{templateUrl:"views/subviews/meetingAgendaClosed.html",controller:"AgendaCtrl"}}}).state("Meeting",{views:{sub4:{templateUrl:"views/subviews/meetingMinutes.html",controller:"MinuteTakingCtrl",resolve:{agendaItems:["agendaService","meetingService","$state","$route",function(a,b,c,d){return console.log(a,b,c,d),a.getAgendaItems(d.current.params.id)}]}}}})}]),angular.module("starChamberUiApp").controller("MeetingCtrl",["$scope","$rootScope","$location","$state","$routeParams","meetingService","UserService","meeting",function(a,b,c,d,e,f,g,h){a.meeting=h,b.boardName="Meeting manager",null==e.state?c.search("state","Polling"):d.transitionTo(e.state),console.log(a.meeting.title),"manager"==g.userData.role?a.manager=!0:a.manager=!1,a.addMember=function(b){contains(a.invited,b)?window.alert("User already invited!"):(a.invited.push({name:b}),a.invName=" ",window.alert("User added with name:"+b))},a.setDetails=function(c,d){a.title=c,a.description=d,b.title=c,b.description=d,$("#descModal").modal("hide")},a.setLocation=function(c,d){a.locationName=c,b.locationName=c,a.locationAddr=d,b.locationAddr=d,$("#locationModal").modal("hide")},a.contains=function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1}}]),angular.module("starChamberUiApp").factory("meetingService",["$filter",function(a){var b={};return b.meetings=[{title:"test title",description:"Test Desc",id:123,invite:[],attending:[],state:2,date:new Date("18 May 2015 17:30:00"),duration:30,chairmanId:1,address:"Test Addr",locName:"Test locName",conditions:{rescheduled:!0,modified:!1,editable:!0,cancelled:!1},pollItems:[]},{id:213,title:"Weekly meeting",description:"This week we need to discuss the next months budget, we also have multiple concerns",invite:[{name:"chris",id:240},{name:"dave",id:1},{name:"dale",id:2},{name:"steven",id:444},{name:"nghia",id:355},{name:"dan",id:346}],attending:[],state:0,date:new Date("18 May 2015 17:30:00"),duration:40,chairmanId:3,address:"Test Addr",locName:"Test locName",conditions:{rescheduled:!1,modified:!1,editable:!0,cancelled:!1},pollItems:[{date:"3-9-2015",time:"12:00",votedId:[2],id:0},{date:"2-9-2015",time:"12:00",votedId:[1],id:1}]}],b.meetingFilter=function(a,b){for(var c=[],d=0;d<a.length;++d){var e=!1;if(a[d].invite.length>0)for(var f=0;f<a[d].invite.length;++f)a[d].invite[f].id==b&&(e=!0);e&&c.unshift(a[d]),a[d].chairmanId==b&&c.unshift(a[d])}return c},b.getMeetings=function(a){return b.meetingFilter(b.meetings,a.id)},b.getMeeting=function(a){for(var c=0;c<b.meetings.length;++c)if(b.meetings[c].id==a)return b.meetings[c];return!1},b.postMeeting=function(a,c){b.meetings.unshift({id:c.Id,title:c.title,description:c.description,chairId:c.chairId,invitedId:c.invitedId,attendingId:[],state:0,date:c.date,address:c.address,locName:c.locName,duration:c.duration,conditions:c.conditions,pollItems:[],agendaItemsP:[],agendaItems:[]}),console.log(b.meetings)},b}]);var backendRoute="http://localhost:9000";angular.module("starChamberUiApp").factory("concernRESTService",["$resource",function(a){return a(backendRoute+itemRESTRoute,{},{})}]).factory("minuteRESTService",["$resource",function(a){return a(backendRoute+itemRESTRoute,{},{})}]).factory("reportRESTService",["$resource",function(a){return a(backendRoute+itemRESTRoute,{},{})}]).factory("votingRESTService",["$resource",function(a){return a(backendRoute+itemRESTRoute,{},{})}]).factory("notificationRESTService",["$resource",function(a){return a(backendRoute+itemRESTRoute,{},{})}]),angular.module("starChamberUiApp").controller("AgendaCtrl",["$scope","$rootScope","agendaService","$routeParams",function(a,b,c,d){a.agendaItems=c.getAgendaItems(d.meeting_id),a.showRemovedItems=!1,a.newItem=function(b,c,e){var f=0;0==!a.agendaItems.pending.length?f=parseInt(a.agendaItems.pending[a.agendaItems.pending.length-1].id)+1:0==!a.agendaItems.approved.length&&(f=parseInt(a.agendaItems.approved[a.agendaItems.approved.length-1].id)+1),a.agendaItems.pending.push({title:b,description:c,duration:parseInt(e),id:f,meetingId:d.meeting_id,userId:"Nghia changed shit so doesnt work atm"})},a.confirmItem=function(b){a.tempItem={title:b.title,description:b.description,duration:b.duration,id:b.id,meetingId:b.meetingId,userId:b.userId,decisions:[{dName:"Add decisions!",dVotes:[]}]},a.agendaItems.approved.push(a.tempItem),a.agendaItems.pending.splice(a.agendaItems.pending.indexOf(b),1),a.updateTime(),$(".modal.in").modal("hide")},a.denyItem=function(b){a.agendaItems.pending.splice(a.agendaItems.pending.indexOf(b),1),a.agendaItems.denied.push(b),$("#pendingItemModal").modal("hide")},a.deleteItem=function(b){a.agendaItems.approved.splice(a.agendaItems.approved.indexOf(b),1),a.agendaItems.denied.push(b),a.updateTime()},a.totalTime=0,a.overTime=!1,a.updateTime=function(){a.totalTime=0;for(var b=0;b<a.agendaItems.approved.length;b++)a.totalTime+=a.agendaItems.approved[b].duration;a.totalTimePercent=a.totalTime/a.meeting.duration*100,a.totalTime>a.meeting.duration?a.overTime=!0:a.overTime=!1},a.updateTime(),a.getPercent=function(){return totalTimePercent},a.addDecision=function(b,c){for(var d=0;d<a.agendaItems.length;d++){var e=a.agendaItems[d].id;if(e==b){a.agendaItems[d].decisions.push({dName:c,id:["temp cause this aint done"]});break}}},a.showItemDetails=function(a){$("#attachmentTitle").text(" "),$("#attachmentDesc").text(" "),$("#itemTitle").text(a.title),$("#itemDesc").text(a.description),$("#itemTime").text("Requested "+a.duration+" minutes"),$("#userId").text("submited by member: "+a.userId),"concern"==a.type?($("#attachmentTitle").text(a.attachment.title),$("#attachmentDesc").text(a.attachment.description)):"report"==a.type,$("#pendingItemModal").modal("show")},$("#close-pendingItemModal").click(function(){$("#pendingItemModal").modal("hide")}),a.showAddItemModal=function(){$("#addItemModal").modal("show")},$("#close-addItemModal").click(function(){$("#addItemModal").modal("hide")}),a.showRemoved=function(){a.showRemovedItems=!0},a.hideRemoved=function(){a.showRemovedItems=!1}}]),angular.module("starChamberUiApp").factory("agendaService",function(){var a={};return a.discussionItems=[{type:"discussion",attachment:{},id:1,meetingId:123,userId:1,title:"Missing Paper Run",description:"For the third week in a row the local paper run has not come around the residents houses, this is not the kind of image we want for our business and as such action must be taken within the week!",duration:15,decisions:[{dName:"Hire New staff",dVotes:[]},{dName:"Roll out new bicycles",dVotes:[]}],notes:"Empty"},{type:"concern",attachment:{title:"My pipes are really loud",description:"For the past week the pipes in my unit have been extremely loud and its becoming unbearable, please send someone over to fix this"},id:2,meetingId:123,userId:2,title:"Residents complaining about pipes",description:"See attached concern for details...",duration:20,decisions:[{dName:"Ignore it",dVotes:[1]},{dName:"Fire the plumber",dVotes:[]}],notes:"Empty"},{type:"concern",attachment:{title:"My pipes are really loud",description:"For the past week the pipes in my unit have been extremely loud and its becoming unbearable, please send someone over to fix this"},id:3,meetingId:213,userId:2,title:"Residents complaining about pipes",description:"See attached concern for details...",duration:20,decisions:[{dName:"Ignore it",dVotes:[1]},{dName:"Fire the plumber",dVotes:[]}],notes:"Empty"},{type:"concern",attachment:{title:"My pipes are really bad mang",description:"For the past week the pipes in my unit have been extremely loud and its becoming unbearable, please send someone over to fix this"},id:4,meetingId:213,userId:2,title:"Residents complaining about pipes",description:"See attached concern for details...",duration:5,decisions:[{dName:"Ignore it",dVotes:[1]},{dName:"Fire the plumber",dVotes:[]}],notes:"Empty"}],a.approvalItems=[{status:"Confirmed",id:1,meetingId:123,discussionItemId:1},{status:"Pending",approvalItemId:2,meetingId:123,discussionItemId:2},{status:"Confirmed",id:3,meetingId:213,discussionItemId:3},{status:"Confirmed",id:4,meetingId:213,discussionItemId:4}],a.postApprovalItem=function(a,b){a.approvalItems.unshift({status:b.status,id:b.id,meetingId:b.meetingId,discussionItemId:b.discussionItemId})},a.getAgendaItems=function(b){for(var c={approved:[],pending:[],denied:[]},d=0;d<a.approvalItems.length;++d)a.approvalItems[d].meetingId==b&&("Confirmed"==a.approvalItems[d].status?c.approved.push(a.getDiscussionItem(a.approvalItems[d].discussionItemId)):"Pending"==a.approvalItems[d].status?c.pending.push(a.getDiscussionItem(a.approvalItems[d].discussionItemId)):c.denied.push(a.getDiscussionItem(a.approvalItems[d].discussionItemId)));return c},a.postDiscussionItem=function(a,b){a.agendaItemsP.unshift({title:b.title,description:b.description,duration:b.duration,id:b.id,meetingId:b.meetingId,userId:b.userId})},a.getDiscussionItem=function(b){for(var c=0;c<a.discussionItems.length;++c)if(a.discussionItems[c].id==b)return a.discussionItems[c]},a.getMeetingItems=function(b){for(var c=[],d=0;d<a.approvalItems.length;++d)a.approvalItems[d].meetingId==b&&c.push(a.getDiscussionItem(a.approvalItems[d].discussionItemId));return c},a}),angular.module("starChamberUiApp").controller("VoteCtrl",["$scope","$rootScope","pollService","$routeParams",function(a,b,c,d){function e(a){var b=a.getDate(),c=a.getMonth()+1,d=a.getFullYear(),e=b+"/"+c+"/"+d;return e}function f(a){var b=a.getMinutes(),c=a.getHours(),d=c+":"+b;return d}a.addMeetingTime=function(b,d){if(a.meeting.pollItems.length<7){var g=e(b),h=f(d);c.postPoll(a.meeting,{date:g,time:h,id:"temp",votedId:[]})}else window.alert("Maximum limit reached because I havent put pages in yet!")},a.deleteMeetingTime=function(b){for(var c=0;c<a.meeting.pollItems.length;++c)a.meeting.pollItems[c].id==b&&a.meeting.pollItems.splice(c,1)},a.vote=function(c){for(var d=0;d<a.meeting.pollItems.length;d++)if(a.meeting.pollItems[d].id==c){b.userdata.id in a.meeting.pollItems[d].votedId?(a.meeting.pollItems[d].votedId.splice(a.meeting.pollItems[d].votedId.indexOf(b.userdata.id),1),window.alert("User"+b.userdata.name+" was removed from time "+c)):(a.meeting.pollItems[d].votedId.push(b.userdata.id),window.alert("User"+b.userdata.name+" was added to time "+c));break}},a.unAttend=function(){notAttending.push(a.name)}}]),angular.module("starChamberUiApp").factory("pollService",function(){var a={};return a.polls=a.postPoll=function(a,b){a.pollItems.unshift({date:b.date,time:b.time,id:b.id,votedId:b.votedId})},a}),angular.module("starChamberUiApp").controller("InviteCtrl",["$scope","$rootScope",function(a,b){a.memberDatabase=[{name:"Chris",id:1,role:"Member"},{name:"Steve",id:2,role:"Member"},{name:"Nghia",id:3,role:"Manager"},{name:"Micheal",id:4,role:"Member"},{name:"Stanis",id:5,role:"Manager"}],a.showNewInvite=function(){$("#addInviteModal").modal("show")},$("#close-inviteModal").click(function(){$("#addInviteModal").modal("hide")}),a.addInvited=function(b){a.meeting.invite.push(b)},a.deleteInvited=function(b){for(var c=0;c<a.meeting.invite.length;++c)if(a.meeting.invite[c].id==b.id){a.meeting.invite.splice(c,1);break}}}]),angular.module("starChamberUiApp").factory("ConcernService",["$filter",function(a){var b={};return b.concerns=[{id:1,subject:"Earthquake alarm",date:new Date(2015,4,29),description:"Earthquake alarm goes off on its own.Really irritating",status:"discussed",userId:3,fileList:[]},{id:2,subject:"Loud noise from apartment 23",date:new Date(2015,7,23),description:"Tenant playing bagpipe all night with his girlfriend.It's annoying that it is so loud.But good for them",status:"planned",userId:3,fileList:[]},{id:3,subject:"New tenant pet's snake",date:new Date(2014,3,5),description:"Not sure if it's an anaconda, but it definitely wants my bun",status:"pending",userId:2},{id:4,subject:"Auction for unit 5",date:new Date,description:"Will the auctioneer park their car on our parking spot",status:"pending",userId:1,fileList:[]},{id:5,subject:"Dangling high voltage cable",date:new Date,description:"General/Civil engineers did a bad job wiring the high voltage cable to the pole,now they dangling near my water tank.",status:"planned",userId:3,fileList:[]},{id:6,subject:"Rat found near the sewer line",date:new Date,description:"I can't even",status:"discussed",userId:2,fileList:[]}],b.getConcern=function(c){return"user"!=c.role?b.concerns:a("filter")(b.concerns,{userId:c.id})},b.postConcern=function(a,c){return b.concerns.unshift({subject:c.subject,date:new Date,description:c.description,status:"pending",userId:a}),!0},b.deleteConcern=function(a){var c=b.concerns.indexOf(a);b.concerns.splice(c,1)},b}]),angular.module("starChamberUiApp").factory("minuteService",function(){var a={};return a}),angular.module("starChamberUiApp").factory("reportService",function(){var a={};return a}),angular.module("starChamberUiApp").controller("MinuteTakingCtrl",["$scope","agendaItems","UserService","$routeParams",function(a,b,c,d){a.console=console,a.agendaItems=b,a.manager="manager"==c.userData.role,a.voteFor=function(a,b){console.log(a,b);var c=a.decisionsLabels.indexOf(b);a.decisionsData[a.previousVote]--,a.decisionsData[c]++,a.previousVote=c},a.initedCkEditor=!1,console.log(d),a.minuteNote=localStorage.getItem("minuteNote"+d.id),a.minuteNote=angular.isDefined(a.minuteNote)?JSON.parse(a.minuteNote):"",angular.element(document).ready(function(){console.log("Hi")}),a.$on("$viewContentLoaded",function(){document.getElementById("displayHTML").innerHTML=a.minuteNote}),a.initCkEditor=function(b){document.getElementById("displayHTML").innerHTML=a.minuteNote},a.saveNote=function(a){localStorage.setItem("minuteNote"+d.id,JSON.stringify(a)),document.getElementById("displayHTML").innerHTML=a},angular.forEach(a.agendaItems.approved,function(a,b){a.decisionsLabels=[],a.decisionsData=[],angular.forEach(a.decisions,function(b,c){a.decisionsLabels.push(b.dName),a.decisionsData.push(b.dVotes.length)})})}]);